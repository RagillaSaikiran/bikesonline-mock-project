<template>
    <div class="bgcolorcls">
        <template if:true={pageLoading}>
            <lightning-spinner class="pageLoadingStyle" alternative-text="Loading" size="medium"></lightning-spinner>
        </template>
        <div class="main-container slds-grid slds-grid_vertical slds-gutters">
            <div class="slds-col slds-var-p-bottom_medium ">
                <template if:true={errorCheck}>
                    <div class="error slds-var-p-around_x-small slds-var-p-top_small" role="alert">
                        <span>{errorMessage}</span>
                    </div>
                </template>
            </div>

            <div class="slds-col">
                <div class="slds-form-element">
                    <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left tooltip">
                        <lightning-icon class="input-icon" icon-name="utility:user" alternative-text="username"
                            size="xx-small"></lightning-icon>
                        <input type="text" data-id="inputFirstName" placeholder="First Name"
                            class="slds-input input-element" value={firstName} onchange={handleFirstNameChange}
                            required />
                        <span class={tooltip_field}>Please enter the firstname</span>
                    </div>
                </div>
            </div>
            
            <div class="slds-col">
                <div class="slds-form-element">
                    <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left tooltip">
                        <lightning-icon class="input-icon" icon-name="utility:user" alternative-text="username"
                            size="xx-small"></lightning-icon>
                        <input type="text" data-id="inputLastName" placeholder="Last Name"
                            class="slds-input input-element" value={lastName} onchange={handleLastNameChange} required />
                        <span class={tooltip_field}>Please enter the lastname</span>
                    </div>
                </div>
            </div>

            <div class="slds-col tooltipEmail">
                <div class="slds-form-element">
                    <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left tooltip"
                        onmouseover={handleEmailHover}>
                        <lightning-icon class="input-icon" icon-name="utility:email" alternative-text="username"
                            size="xx-small"></lightning-icon>
                        <input type="text" data-id="inputEmail" placeholder="Email" class="slds-input input-element"
                            value={email} onkeyup={handleEmailChange} pattern="^[^@\s]+@[^@\s]+\.[^@\s]+$"
                            oninvalid={onEmailInvalid} oninput={onEmailInput} required />
                        <span class={tooltip_field}>Please enter the email</span>
                        <span class={tooltip_style}>{emailError}</span>
                        <span class={tooltip_field}>{emailError}</span>
                    </div>
                </div>
            </div>

            <div class="slds-col usernameColumn">
                <div class="slds-form-element">
                    <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left tooltip">
                        <lightning-icon class="input-icon" icon-name="utility:user" alternative-text="username" size="xx-small"></lightning-icon>
                        <input type="text" data-id="inputUsername" placeholder="Username" class="slds-input input-element" value={userName} disabled required />
                        <span class={tooltip_field}>Please enter the username.</span>
                    </div>
                </div>
            </div> 

            <div class="slds-col">
                <div class="slds-form-element">
                    <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left tooltip">
                        <lightning-icon class="input-icon" icon-name="utility:call" alternative-text="username"
                            size="xx-small"></lightning-icon>
                        <input type="text" data-id="inputPhone" placeholder="Phone"
                            class="slds-input input-element" value={Phone} onchange={handlePhoneChange} required />
                        <span class={tooltip_field}>Please enter the phone</span>
                    </div>
                </div>
            </div>

            <div class="slds-col">
                <div class="slds-form-element">
                    <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left tooltip">
                        <lightning-icon class="input-icon" icon-name="utility:lock" alternative-text="username"
                            size="xx-small"></lightning-icon>
                        <input type="password" data-id="inputPassword" placeholder="Create Password"
                            class="slds-input input-element" value={password} onchange={handlePasswordChange}
                            pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$" required />
                        <span class="tooltiptext">Password length should be min 8 characters, containing at
                            least 1 letter, 1 number and 1 special character</span>
                            <span class={tooltip_field}>Please enter the password</span>
                        <span class={passwordTooltiperror}>{passwordError}</span>
                    </div>
                </div>
            </div>

            <div class="slds-col">
                <div class="slds-form-element">
                    <div class="slds-form-element__control slds-input-has-icon slds-input-has-icon_left tooltip">
                        <lightning-icon class="input-icon" icon-name="utility:lock" alternative-text="username" size="xx-small"></lightning-icon>
                        <input type="password" data-id="inputConfirmPassword" placeholder="Confirm Password"
                            class="slds-input input-element" value={confirmPassword} onchange={handleConfirmPasswordChange}
                            pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$" required />
                            <span class={tooltip_field}>Please enter the password</span>
                        <span class={passwordTooltiperror}>{passwordError}</span>
                    </div>
                </div>
            </div>

            <div class="slds-col">
                <button type="submit" class="slds-button slds-button_brand slds-align_absolute-center" onclick={handleRegister}>signup</button>
                <span>Already have an account?   </span><a href="/s/login" class="sub-heading register-heading">Login</a>
            </div>

        </div>
    </div>
</template>